function getElementOffsetTopValue(e){for(var t=e.offsetTop,a=e.offsetParent;null!==a;)t+=a.offsetTop,a=a.offsetParent;return t}function hideWatchVideoElement(e,t,a,l){var i=e.offsetWidth,n="Playlist cleared";if(t=Math.abs(t),t==i){a[0].removeChild(e);var s=document.getElementsByClassName("watchVideo").length;if(!(s>0)){var o=document.createElement("p"),r=document.createTextNode(n);o.appendChild(r),o.className="noWatchVideoFound",a[0].appendChild(o),jQuery("#clearButton").remove()}return!1}t+=i/5,"right"==l&&(e.style.left=t+"px"),"left"==l&&(e.style.left="-"+t+"px"),setTimeout(function(){hideWatchVideoElement(e,t,a,l)},30)}function clearPlaylistVideo(e,t){var a=confirm("Are you sure do you want to delete?");if(1!=a)return!1;if(void 0!==document.body.dataset)var l=document.getElementsByClassName("playlistScrollData")[0].dataset.plid;else var l=document.getElementsByClassName("playlistScrollData")[0].getAttribute("data-plid");jQuery.ajax({url:url,type:"POST",data:"&action=clearplaylistvideo&vid="+t+"&pid="+l,success:function(t){var a=document.getElementsByClassName("playlistScrollData"),l=e.parentNode,i=jQuery.parseJSON(t);return checkResult=i.checkResult,1==checkResult?(setTimeout(function(){hideWatchVideoElement(l,0,a,watchSlide)},0),!1):void 0}})}var parentElement=document.getElementsByClassName("playlistTemplateOuterBox"),displayHeight=window.innerHeight,parentElementTopHeight=getElementOffsetTopValue(parentElement[0]);window.addEventListener("scroll",function(e){var t=parentElement[0].offsetHeight,a=parentElementTopHeight+t,l=a-displayHeight-300,i=pageYOffset,n=(document.getElementsByClassName("watchVideoContainer"),document.getElementsByClassName("playlistScrollData"));if(void 0!==document.body.dataset)var s=n[0].dataset.totalvideocount;else var s=n[0].getAttribute("data-totalvideocount");if(void 0!==document.body.dataset)var o=n[0].dataset.setaction;else var o=n[0].getAttribute("data-setaction");if("playlistvideos"==o){var r=document.getElementsByClassName("watchVideo").length,d="getplaylistvideos";if(void 0!==document.body.dataset)var c=n[0].dataset.plid;else var c=n[0].getAttribute("data-plid");ajaxAction="&action="+d+"&startoffset="+r+"&pid="+c}if("playlist"==o){var d="getplaylistbyoffset",r=document.getElementsByClassName("playlistTemplateBox").length;ajaxAction="&action="+d+"&startOffset="+r}if(0==r)return!1;if(r>=s)return!1;if(i>=l){if(parentElement[0].querySelector(".watchloading"))return!1;var u=document.createElement("span");if(u.className="watchloading",parentElement[0].appendChild(u),!n[0].querySelector(".watchLoadingBar")&&s>=r){var m=document.createElement("div");m.className="watchLoadingBar";var y=document.createAttribute("style");void 0!==document.body.dataset?y.value="clear:both;background-color:transparent;background-image:url("+n[0].dataset.loaderthumb+"loader.gif)":y.value="clear:both;background-color:transparent;background-image:url("+n[0].getAttribute("data-loaderthumb")+"loader.gif)",m.setAttributeNode(y),n[0].appendChild(m)}jQuery.ajax({url:url,type:"POST",data:ajaxAction,success:function(e){var t=document.getElementsByClassName("playlistScrollData");if("playlistvideos"==o)var a=document.getElementsByClassName("watchVideo");if("playlist"==o)var a=document.getElementsByClassName("playlistTemplateBox");var l,i=jQuery.parseJSON(e);if(void 0!==document.body.dataset?t[0].dataset.totalvideocount=i[i.length-1]:t[0].setAttribute("data-totalvideocount",i[i.length-1]),i=i.splice(0,i.length-1),t[0].querySelector(".watchLoadingBar")&&t[0].removeChild(t[0].querySelector(".watchLoadingBar")),"playlistvideos"==o)for(var n=0;n<i.length;n++)l=a[0].cloneNode(!0),l.querySelector("a").href=i[n].url,l.querySelector("a img").src=i[n].thumb,l.querySelector("a img").setAttribute("title",i[n].name),l.querySelector(".watchContentCount").innerHTML=i[n].hitcount+" views",l.querySelector(".watchContentRate").className="ratethis1 "+i[n].rate+" watchContentRate",l.querySelector(".watchContentTitle a").href=i[n].url,l.querySelector(".watchContentTitle a").innerHTML=i[n].name,l.querySelector(".watchContentTitle a").setAttribute("title",i[n].name),l.querySelector(".watchContentDescription").innerHTML=i[n].description,l.querySelector(".watchVideoCloseButton").setAttribute("onclick","clearPlaylistVideo(this,"+i[n].vid+")"),t[0].appendChild(l);if("playlist"==o)for(var n=0;n<i.length;n++){l=a[0].cloneNode(!0),void 0!==document.body.dataset?l.dataset.pid=i[n].playlistId:l.setAttribute("data-pid",i[n].playlistId);for(var s=l.querySelectorAll("a"),r=0;r<s.length;r++)-1!=location.href.indexOf("?")?s[r].href=location.href+"&pid="+i[n].playlistId:s[r].href=location.href+"?pid="+i[n].playlistId;l.querySelector("a img").src=i[n].thumb,l.querySelector("a img").setAttribute("title",i[n].playlistName),l.querySelector(".playlistVideoCountBox").innerHTML=i[n].count+" videos",l.querySelector(".playlistNameBox").innerHTML=i[n].playlistName,l.querySelector(".playlistNameBox").setAttribute("title",i[n].playlistName),t[0].appendChild(l)}return document.getElementsByClassName("playlistTemplateOuterBox")[0].removeChild(document.getElementsByClassName("watchloading")[0]),!1}})}});var watchSlide="right",playlistScroll=document.getElementsByClassName("playlistScrollData")[0],playlistDeleteButton=document.getElementsByClassName("deletePlaylistButton")[0],playlistDeleteButtonHandle=function(){var e=confirm("Are you sure do you want to playlist?");if(1!=e)return!1;if(void 0!==document.body.dataset)var t=playlistDeleteButton.dataset.plid;else var t=playlistDeleteButton.getAttribute("data-plid");jQuery.ajax({url:url,type:"POST",data:"&action=clearplaylist&pid="+t,success:function(e){var t=document.getElementsByClassName("playlistScrollData")[0],a=document.getElementsByClassName("playlistContainerBox")[0],l=jQuery.parseJSON(e);if(checkResult=l.checkResult,1==checkResult){a.parentNode.removeChild(a),childCount=t.childElementCount;for(var i=0;i<childCount;i++)t.removeChild(t.firstElementChild);var n=document.createElement("div");return n.className="noWatchVideoFound",n.innerHTML="Playlist Cleared",t.appendChild(n),!1}}})};playlistDeleteButton.addEventListener("click",playlistDeleteButtonHandle,!1);var playlistClearButton=document.getElementsByClassName("clearPlaylistButton")[0],playlistClearButtonHandle=function(){var e=confirm("Are you sure do you want to all videos?");if(1!=e)return!1;if(void 0!==document.body.dataset)var t=playlistClearButton.dataset.plid;else var t=playlistClearButton.getAttribute("data-plid");var a=this;jQuery.ajax({url:url,type:"POST",data:"&action=clearplaylistvideos&pid="+t,success:function(e){var t=document.getElementsByClassName("playlistScrollData")[0],l=jQuery.parseJSON(e);if(checkResult=l.checkResult,1==checkResult){a.parentNode.removeChild(a),videoElement=t.querySelectorAll(".watchVideo"),childCount=t.childElementCount;for(var i=0;i<childCount;i++)t.removeChild(t.firstElementChild);var n=document.createElement("div");return n.className="noWatchVideoFound",newTextNode=document.createTextNode("Playlist Videos Cleared"),n.appendChild(newTextNode),t.appendChild(n),!1}}})};playlistClearButton&&playlistClearButton.addEventListener("click",playlistClearButtonHandle,!1);var playlistNameElement=document.getElementsByClassName("playlistNameElement")[0],editNameElement=document.getElementsByClassName("spanForEditName")[0],editPlaylistNameElementHandle=function(e){var t=this.value,a=e.keyCode,l=this.parentNode,i=this,n=document.getElementsByClassName("playlistNameElement")[0];if(void 0!==document.body.dataset)var s=n.dataset.playlistname;else var s=n.getAttribute("data-playlistname");13==a&&jQuery.ajax({url:url,type:"POST",data:"&action=updateplaylistname&pname="+t+"&ename="+s,success:function(e){var a=jQuery.parseJSON(e);if(checkstatus=a.status,checkResult=a.checkResult,"exists"==checkResult)return alert("Playlist name already exists"),!1;if(1==checkResult){void 0!==document.body.dataset?n.dataset.playlistname=t:n.setAttribute("data-playlistname",t);var s=l.querySelector(".spanForPlaylist");return s.innerHTML=t,l.removeChild(i),playlistNameElement.firstElementChild.style.display="block",!1}}})};playlistNameElementHandle=function(){var e=document.getElementsByClassName("editPlaylistName");if(e.length>0)return!1;var t=document.createElement("input");t.className="editPlaylistName",void 0!==document.body.dataset?t.value=playlistNameElement.dataset.playlistname:t.value=playlistNameElement.getAttribute("data-playlistname"),playlistNameElement.firstElementChild.style.display="none",playlistNameElement.appendChild(t),t.focus(),t.addEventListener("keyup",editPlaylistNameElementHandle,!1)},editNameElement.addEventListener("click",playlistNameElementHandle,!1);
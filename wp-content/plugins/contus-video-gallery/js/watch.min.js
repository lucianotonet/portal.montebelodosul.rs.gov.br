function changeWatchHistoryStatus(e){jQuery.ajax({url:url,type:"POST",data:"&action=changehistorystatus&status="+e,success:function(e){var t=document.getElementsByClassName("watchButtonContainer"),a=jQuery.parseJSON(e);if(checkResult=a.checkResult,1==checkResult)var r=document.getElementsByClassName(a.status+"Button");if(r){t[0].removeChild(r[0]);var o=document.createElement("button"),n=document.createTextNode(a.buttonName);o.appendChild(n);var c=document.createAttribute("class");c.value=a.buttonClassName+" watchButton",o.setAttributeNode(c);var i=document.createAttribute("title");i.value=a.buttonName,o.setAttributeNode(i);var l=document.createAttribute("id");l.value=a.buttonClassName,o.setAttributeNode(l);var d=document.createAttribute("onclick");d.value="changeWatchHistoryStatus('"+a.buttonCallBack+"')",o.setAttributeNode(d),t[0].insertBefore(o,t[0].firstChild)}}})}function clearWatchVideoElement(e,t,a,r,o){if(r>=o){if(void 0!==document.body.dataset)var n=a[0].dataset.setaction;else var n=a[0].getAttribute("data-setaction");if("later"==n)var c="Watch later videos cleared";if("history"==n)var c="Watch History cleared";var i=document.createElement("p"),e=document.getElementsByClassName("watchVideoContainer"),c=document.createTextNode(c);return i.appendChild(c),i.className="noWatchFound",a[0].appendChild(i),jQuery(".watchVideo").remove(),"later"==n?jQuery(".watchButtonContainer").remove():jQuery(".clearButton").remove(),!1}var l=e[0].offsetWidth;t+=l/5,l>=t?(e[0].style.left="-"+t+"px",setTimeout(function(){clearWatchVideoElement(e,t,a,r,o)},40)):(a[0].removeChild(a[0].firstChild),r+=1,t=0,setTimeout(function(){clearWatchVideoElement(e,t,a,r,o)},0))}function clearHistory(){var e=confirm("Are you sure do you want to delete all videos?");if(1!=e)return!1;var t=document.getElementsByClassName("watchVideoContainer");if(void 0!==document.body.dataset)var a=t[0].dataset.setaction;else var a=t[0].getAttribute("data-setaction");if("history"==a)var r="clearhistory";if("later"==a)var r="clearwatchlater";jQuery.ajax({url:url,type:"POST",data:"&action="+r,success:function(e){var a=jQuery.parseJSON(e);if(checkResult=a.checkResult,1==checkResult){var r=document.getElementsByClassName("watchVideo");setTimeout(function(){clearWatchVideoElement(r,0,t,0,r.length)},0)}}})}function clearSingleVideo(e,t){var a=confirm("Are you sure do you want to delete?");if(1!=a)return!1;var r=document.getElementsByClassName("watchVideoContainer");if(void 0!==document.body.dataset)var o=r[0].dataset.setaction;else var o=r[0].getAttribute("data-setaction");if("history"==o)var n="clearhistorybyid";if("later"==o)var n="clearwatchlaterbyid";jQuery.ajax({url:url,type:"POST",data:"&action="+n+"&vid="+t,success:function(t){var a=document.getElementsByClassName("watchVideoContainer"),r=e.parentNode,n=jQuery.parseJSON(t);return checkResult=n.checkResult,1==checkResult?(setTimeout(function(){hideWatchVideoElement(r,0,a,watchSlide,o)},0),!1):void 0}})}function hideWatchVideoElement(e,t,a,r,o){var n=e.offsetWidth;if("history"==o)var c="Watch History cleared";if("later"==o)var c="Watch later videos cleared";if(t=Math.abs(t),t==n){a[0].removeChild(e);var i=document.getElementsByClassName("watchVideo").length;if(!(i>0)){var l=document.createElement("p"),d=document.createTextNode(c);l.appendChild(d),l.className="noWatchFound",a[0].appendChild(l),jQuery("#clearButton").remove(),"later"==o&&jQuery(".watchButtonContainer").remove()}return!1}t+=n/5,"right"==r&&(e.style.left=t+"px"),"left"==r&&(e.style.left="-"+t+"px"),setTimeout(function(){hideWatchVideoElement(e,t,a,r,o)},30)}function getElementOffsetTopValue(e){for(var t=e.offsetTop,a=e.offsetParent;null!==a;)t+=a.offsetTop,a=a.offsetParent;return t}url=adminurl+"admin-ajax.php";var clearButtonElement=document.getElementsByClassName("clearButton");clearButtonElement[0].addEventListener("click",function(){clearHistory()},!1);var watchSlide="right",parentElement=document.getElementsByClassName("watchOuterBox"),displayHeight=window.innerHeight,parentElementTopHeight=getElementOffsetTopValue(parentElement[0]);window.addEventListener("scroll",function(e){var t=parentElement[0].offsetHeight,a=parentElementTopHeight+t,r=a-displayHeight-300,o=pageYOffset,n=document.getElementsByClassName("watchVideoContainer");if(void 0!==document.body.dataset)var c=n[0].dataset.totalvideocount;else var c=n[0].getAttribute("data-totalvideocount");var i=document.getElementsByClassName("watchVideo").length;if(void 0!==document.body.dataset)var l=n[0].dataset.setaction;else var l=n[0].getAttribute("data-setaction");if("history"==l)var d="getHistoryVideo";if("later"==l)var d="getwatchlatervideo";if(0==i)return!1;if(i>=c)return!1;if(o>=r){if(parentElement[0].querySelector(".watchloading"))return!1;var u=document.createElement("span");if(u.className="watchloading",parentElement[0].appendChild(u),!n[0].querySelector(".watchLoadingBar")&&c>=i){var s=document.createElement("div");s.className="watchLoadingBar";var h=document.createAttribute("style");void 0!==document.body.dataset?h.value="background-image:url("+n[0].dataset.loaderthumb+"loader.gif)":h.value="background-image:url("+n[0].getAttribute("data-loaderthumb")+"loader.gif)",s.setAttributeNode(h),n[0].appendChild(s)}jQuery.ajax({url:url,type:"POST",data:"&action="+d+"&startoffset="+i,success:function(e){var t,a=document.getElementsByClassName("watchVideoContainer"),r=document.getElementsByClassName("watchVideo"),o=jQuery.parseJSON(e);void 0!==document.body.dataset?a[0].dataset.totalvideocount=o[o.length-1]:a[0].setAttribute("data-totalvideocount",o[o.length-1]),o=o.splice(0,o.length-1),a[0].querySelector(".watchLoadingBar")&&a[0].removeChild(a[0].querySelector(".watchLoadingBar"));for(var n=0;n<o.length;n++){if(t=r[0].cloneNode(!0),t.querySelector(".videoWatchedBox")&&(watchedBoxElement=t.querySelector(".videoWatchedBox"),t.appendChild(watchedBoxElement),t.removeChild(watchedBoxElement)),-2==o[n].status){var c=document.createElement("span");c.className="videoWatchedBox",videoWatchedBoxTextNode=document.createTextNode("Watched"),c.appendChild(videoWatchedBoxTextNode),t.querySelector(".watchThumb a").appendChild(c)}t.querySelector("a").href=o[n].url,"undefined"!=typeof o[n].status&&""!=o[n].status&&(t.querySelector("a").removeAttribute("onclick"),1==o[n].status&&(t.querySelector("a").setAttribute("onclick","changeWatchLaterVideoStatus("+o[n].vid+",this)"),t.querySelector(".watchContentTitle a").setAttribute("onclick","changeWatchLaterVideoStatus("+o[n].vid+",this)"))),t.querySelector("a img").src=o[n].thumb,t.querySelector("a img").setAttribute("title",o[n].name),t.querySelector(".watchContentCount").innerHTML=o[n].hitcount+" views",t.querySelector(".watchContentRate").className="ratethis1 "+o[n].rate+" watchContentRate",t.querySelector(".watchContentTitle a").href=o[n].url,t.querySelector(".watchContentTitle a").innerHTML=o[n].name,t.querySelector(".watchContentTitle a").setAttribute("title",o[n].name),t.querySelector(".watchContentDescription").innerHTML=o[n].description,t.querySelector(".watchVideoCloseButton").setAttribute("onclick","clearSingleVideo(this,"+o[n].vid+")"),a[0].appendChild(t)}return document.getElementsByClassName("watchOuterBox")[0].removeChild(document.getElementsByClassName("watchloading")[0]),!1}})}});